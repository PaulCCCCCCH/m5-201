<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="IceWould Training Hub">
    <meta name="author" content="DATA Course Team Led by Chonghan Chen">
    <link rel="canonical" href="https://paulcccccch.github.io/content-spring-21/git/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Git 的使用 - m5-201</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">m5-201</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../schedule/">Current Schedule</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../schedule-21-spring/">Spring 2021 Version</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/PaulCCCCCCH/m5-201/edit/master/docs/content-spring-21/git.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#git">Git 的使用</a></li>
            <li class="second-level"><a href="#_1">引言</a></li>
                
            <li class="second-level"><a href="#git_1">Git 概念</a></li>
                
            <li class="second-level"><a href="#git_2">Git 安装</a></li>
                
            <li class="second-level"><a href="#git_3">Git 本地用法</a></li>
                
                <li class="third-level"><a href="#_2">初始化</a></li>
                <li class="third-level"><a href="#_3">追踪</a></li>
                <li class="third-level"><a href="#_4">提交</a></li>
                <li class="third-level"><a href="#_5">还原</a></li>
                <li class="third-level"><a href="#_6">分支</a></li>
                <li class="third-level"><a href="#_7">合并</a></li>
            <li class="second-level"><a href="#git_4">Git 远程用法</a></li>
                
            <li class="second-level"><a href="#_8">注意</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="git">Git 的使用</h1>
<h2 id="_1">引言</h2>
<p>不知道你有没有过这种经历：<br />
<br></p>
<p>你写好了一份代码，准备提交的时候，突然有个更好的点子，想改动一下，但是又不敢动手，怕改坏了。于是你把代码备份了一份，这才放心删改起来。<br />
<br></p>
<p>你疯狂敲键盘，点子逐渐成型，然而你这时候你的点子出现了分支：是走 A 路线，还是走 B 路线呢？你陷入了沉思，于是又把代码复制了一份... <br />
<br></p>
<p>当你完成这个项目之后，你发现你的代码被复制了几十份，放在你的硬盘里，文件名乱七八糟，甚至分不出每份代码到底是哪个阶段的，想回到某个节点的话，得还原哪份带代码。<br />
<br></p>
<p>这还只是一个人 solo 一个项目的情况。如果有十来个人一起工作，每个人都有自己的一点小想法，把代码复制一遍进行尝试，很快整个项目就变成了屎山（Pi, 2021）。<br />
<br></p>
<p>为了避免这种情况，我们强烈推荐使用 <code>git</code> 。这是一个非常好用的版本管理工具。<br />
<br></p>
<h2 id="git_1">Git 概念</h2>
<p><code>git</code> 会为你保存整个文件夹历史。它会把每次改动的信息都完整地保存在一个地方，这样你就可以随时查看、还原，非常方便。  </p>
<p><code>git</code> 的工作流程是这样：<br />
- 首先，你需要声明，要让 <code>git</code> 去<code>追踪（track）</code>哪些文件。当你创建新文件的时候，需要把它加入<code>追踪</code>的列表中。<br />
- 然后，每次你认为你的工作进行到了一定的阶段（i.e. 需要备份一下你的代码的节点），你需要用 <code>git</code> 去<code>提交（commit）</code>所有被<code>追踪（track）</code>的文件，这样，相当与备份了一下。<br />
- 当你有需要的时候，你可以用 <code>git</code> 去<code>回溯（checkout）</code>某个版本的文件。<br />
<br></p>
<p>当然不只是这些，你还可以：<br />
- 你可以创建一个<code>分支（branch）</code>。你可以把代码备份（提交）到分支上。<br />
- 你可以把一个<code>分支``合并（merge）</code>到另一个<code>分支</code>上，<code>git</code> 会自动分析两个分支之间的相同与不同之处，非常方便。<br />
<br></p>
<p><code>分支</code>和<code>合并</code>的功能在团队合作的时候尤其有用。通常，企业分工的时候，我们会每个人创建一个<code>分支</code>，在<code>分支</code>上开发一个具体的功能，完成后再<code>合并</code>回主分支。<br />
<br></p>
<p>在<code>合并</code>的时候，会有人专门去审核代码，同意后才能<code>合并</code>。我们还可以撰写脚本，在试图<code>合并</code>的时候自动运行测试代码，测试通过后才能发出<code>合并</code>请求。<br />
<br></p>
<p>总之，<code>git</code> 为我们提供了很好的工作流程。</p>
<h2 id="git_2">Git 安装</h2>
<p>请自行搜索 <code>git installation</code></p>
<h2 id="git_3">Git 本地用法</h2>
<p>我们会介绍以下几个：<br />
- <code>git init</code><br />
- <code>git add</code><br />
- <code>git status</code><br />
- <code>git commit</code><br />
- <code>git log</code><br />
- <code>git checkout</code><br />
- <code>git branch</code><br />
- <code>git merge</code>  </p>
<p>掌握它们之后，基本上就可以加入团队进行合作了。<br />
<br></p>
<h3 id="_2">初始化</h3>
<p>首先，对于一个文件夹，你需要使用 <code>git init</code> 来初始化。它会在本地创建一个 <code>.git</code> 文件夹。然后，你就可以在这个文件夹里用 <code>git</code> 进行追溯了。<br />
<br></p>
<p><strong>注意：请不要更改这个文件夹里的任何东西。</strong>除非你想重新初始化 <code>git</code> 历史。这样的话，请把整个 <code>.git</code> 文件夹删除，然后重新运行 <code>git init</code>。<br />
<br></p>
<h3 id="_3">追踪</h3>
<p>想让 <code>git</code> 追踪一个文件，你只需要输入 <code>git add &lt;你要追踪的文件路径&gt;</code>。这样，下次备份（<code>commit</code>）的时候，这个文件就会被放进去。<br />
<br></p>
<p>当然，这样可能会比较麻烦。你可以使用 <code>git add -A</code> 来追踪所有文件。<br />
<br></p>
<p>如果你不想追踪一个文件了，你可以使用 <code>git rm --cached &lt;你不想追踪的文件名字&gt;</code>。<br />
<br></p>
<h3 id="_4">提交</h3>
<p>提交（<code>commit</code>），可以理解成进行一次备份。所有被<code>追踪</code>的文件，都会被备份，你可以随时还原。<br />
<br></p>
<p>在提交之前，请先使用 <code>git status</code> 查看一下，哪些文件正在被追踪（即，这次提交会提交哪些文件），确认没有乱七八糟的东西被提交上去。</p>
<p>提交的时候，使用：<code>git commit -m "&lt;在这里留言&gt;"</code>。留言的话，可以说一下这次提交主要改了什么东西，最好清晰一点，让下次自己一眼能知道这是哪个版本。<br />
<br></p>
<p>团队合作的时候，留言相当重要，你要把这次提交达成的功能清晰、完整地列出来。这可能不是一句话能讲清楚的，你需要用
<code>git commit</code>，然后在弹出来的文档里完整地撰写提交信息（编辑的时候会用到 <code>Vim</code> ，建议有精力的同学学习一下）。<br />
<br></p>
<h3 id="_5">还原</h3>
<p>想要还原某个版本，首先你需要用 <code>git log</code> 来查看所有历史的提交。这时候，你提交时候输入的留言（<code>commit message</code>）就很重要。<br />
<br></p>
<p>你会看到所有的 <code>commit</code> 后面，都有一个很长一串 <code>0-9</code> 数字以及 <code>a-e</code> 字母组成的编码。找到你想恢复的版本后，你只需要复制对应的编码，然后使用 <code>git checkout &lt;对应编码&gt;</code> 就可以回到对应的版本了。<br />
<br></p>
<p><strong>注意，这个操作就像把你的文件夹扔到了一台时光机上，所有代码就变成那次提交时的样子了。</strong>所以，<code>git</code> 会强制要求你在 <code>checkout</code> 操作之前先进行一次 <code>commit</code> 操作，不然当前的进度就全都丢失了。<br />
<br></p>
<h3 id="_6">分支</h3>
<p>你可以使用 <code>git branch &lt;新分支名&gt;</code> 在当前分支基础上创建一个新的分支。<br />
<br></p>
<p>你可以使用 <code>git branch</code> 来查看所有分支以及当前所在的分支。<br />
<br></p>
<p>你可以使用 <code>git checkout &lt;分支名&gt;</code> 来跳转到某一个分支的版本。这个操作也会<strong>把当前文件夹送上时光机（当前代码进度会丢失）</strong>。</p>
<h3 id="_7">合并</h3>
<p>当你在 <code>main</code> 分支，想把 <code>dev</code> 分支最新版本的文件合并进来，你可以使用 <code>git merge dev</code>。<br />
<br></p>
<p>注意，有时候会提示有 <code>conflict</code>，你可以看它提示的 <code>conflict</code> 在哪个文件，打开它，按 <code>CTRL+F</code> 搜索 <code>====</code>（一堆等号），就能看到 <code>git</code> 帮你把两边的代码列出来。按照自己的意思改正好之后，你可以 <code>commit</code> 一下，就完成了 <code>merge</code> 操作。<br />
<br></p>
<h2 id="git_4">Git 远程用法</h2>
<p>我们讲过，完整的文件夹历史会被存放在 <code>.git</code> 文件里。<br />
<br></p>
<p><code>git</code> 的灵魂就在于，<code>.git</code> 文件可以放在远程服务器上，这样所有人都可以往同一个 <code>.git</code> 文件里提交东西，大家共享彼此的开发历史。<br />
<br></p>
<p><code>GitHub</code> 就提供了这样一个平台。推荐大家注册一个 <code>GitHub</code> 帐号，这样不仅可以在云端保存自己的代码历史、和其它人合作，还可以展示一些自己引以为傲的项目（然后给 <code>m5-201</code> 的课程点一个 Star ...lol）。<br />
<br></p>
<p>你可以自己创建一个 <code>GitHub Repository</code>（<strong>注意不要创建 <code>README</code> 文件</strong>），然后按照它的指引，把本地初始化好的 <code>git</code> 推送到自己的 <code>GitHub Repository</code> 上。<br />
<br></p>
<p>远程的 <code>git</code> 相关操作比较简单，主要是这几个：
- <code>git push</code> 把本地的 <code>.git</code> 上传到远程。
- <code>git pull</code> 把远程的 <code>.git</code> 合并到本地，并 <code>checkout</code> 到最新的版本。如果远程的 <code>.git</code> 被其它人 <code>commit</code> 过，你需要像合并分支那样解决 <code>conflict</code>。
- <code>git clone</code> 把远程的 <code>.git</code> 文件下载到本地。<strong>这个命令是下载整个初始化好的文件夹，不需要进行 <code>git init</code></strong>。</p>
<h2 id="_8">注意</h2>
<ul>
<li>
<p>请不要使用 <code>git</code> 去追踪大文件，这样备份起来会相当缓慢，<code>git</code> 文件也会异常巨大。可以用 <code>.gitignore</code> 文件自动忽略一些不需要追踪的文件。具体如何操作，请自行搜索 <code>gitignore</code>。  </p>
</li>
<li>
<p>在最开始使用 <code>git</code> 的时候，常常会发现它提示你，现在不能用某个命令，然后给了一些让你一头雾水的提示。这个时候，最好先询问有经验的人，这样可以最大限度节省时间。</p>
</li>
</ul></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
